(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35267db0"],{"09f4":function(t,e,i){"use strict";i.d(e,"a",function(){return s}),Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function a(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,i){var s=o(),r=t-s,l=20,c=0;e="undefined"===typeof e?500:e;var d=function t(){c+=l;var o=Math.easeInOutQuad(c,s,r,e);a(o),c<e?n(t):i&&"function"===typeof i&&i()};d()}},"68b0":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container",staticStyle:{"margin-top":"30px"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"文件名"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("查找")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("上传TikTok")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",height:"450"}},[i("el-table-column",{attrs:{prop:"name",label:"文件名"}}),t._v(" "),i("el-table-column",{attrs:{prop:"path",label:"路径"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createtime",label:"上传时间",formatter:t.formatDateTime}}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return t.handleView(e)}}},[t._v("查看")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){return t.handleDelete(e)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,title:"edit"===t.dialogType?"编辑":"上传"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"",headers:t.headersObj,action:t.uplodatPath,"before-upload":t.beforeUploadVideo,"on-success":t.handleVideoSuccess}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("\n          将文件拖到此处，或\n          "),i("em",[t._v("点击上传")])]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v('\n          只能上传"video/mp4",\n          "video/ogg",\n          "video/flv",\n          "video/avi",\n          "video/wmv",\n          "video/rmvb"文件，且不超过50M\n        ')])])],1)]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible1},on:{"update:visible":function(e){t.dialogVisible1=e}}},[i("div",{staticStyle:{"text-align":"center"}},[i("video",{staticStyle:{width:"500px",height:"550px","max-width":"90%"},attrs:{src:t.videoUrl,controls:"controls"}},[t._v("您的浏览器不支持视频播放")])])])],1)},a=[],o=(i("7f7f"),i("96cf"),i("3b8d")),s=i("5f87"),r=i("b775");function l(t){return Object(r["a"])({url:"/rest/video/tiktok/list",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/rest/video/tiktok/delete",method:"get",params:{id:t}})}var d=i("333d"),u=i("ed08"),p=Object(s["a"])(),m={name:"TikTok",components:{Pagination:d["a"]},data:function(){return{tableKey:0,list:null,total:0,listLoading:!1,listQuery:{page:1,limit:10,name:""},headersObj:{"LinkAdmin-Token":p},uplodatPath:"http://47.103.154.36:8888/rest/video/tiktok/upload",dialogVisible:!1,dialogVisible1:!1,dialogType:"new",videoUrl:""}},created:function(){this.getList()},methods:{getList:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.listLoading=!0,t.prev=1,t.next=4,l(this.listQuery);case 4:e=t.sent,this.listLoading=!1,this.list=e.result.rows,this.total=e.result.records,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),this.listLoading=!1;case 13:case"end":return t.stop()}},t,this,[[1,10]])}));function e(){return t.apply(this,arguments)}return e}(),handleSearch:function(){this.getList()},formatDateTime:function(t,e){return Object(u["e"])(t.createtime)},beforeUploadVideo:function(t){var e=t.size/1024/1024<50;return-1===["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb"].indexOf(t.type)?(this.$message.error("请上传正确的视频格式"),!1):e?void 0:(this.$message.error("上传视频大小不能超过50MB哦!"),!1)},handleVideoSuccess:function(t,e){2e4===t.code?(this.$message.success("上传成功"),this.getList()):this.$message.error(t.msg)},handleCreate:function(){this.dialogType="new",this.dialogVisible=!0},handleView:function(t){var e=t.row;this.dialogVisible1=!0,this.videoUrl="http://47.103.154.36:8888/rest/video/tiktok/view?path="+e.name},handleDelete:function(t){var e=this,i=t.row;this.$confirm("确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c(i.id);case 2:e.$message({showClose:!0,message:"删除成功",type:"success"}),e.getList();case 4:case"end":return t.stop()}},t)}))).catch(function(t){console.error(t)})}}},v=m,h=i("2877"),f=Object(h["a"])(v,n,a,!1,null,null,null);e["default"]=f.exports}}]);